---
title: "设计前言——代码设计是有原则的"
author: "Gordenyou"
date: 2018-02-20T09:53:51+08:00
categories: ["技术之美"]
tags: ["Java", "设计模式"]
lastmod: 
draft: false
summary: "别问，问就是六大原则"
---

做任何事情都是需要原则或者准则来规范的。作为一个程序猿，规范我们代码的优雅程度当然是钱……噢，不，当然是`设计模式六大原则`。

其实这六大原则看过很多次了，白纸黑子写的很清楚，每个字都认识，但是连成句子就好像和作者产生不了共鸣。当然不是作者水平不够，而是我们真的太菜，需要更多的场景来体会这些原则的“苦口婆心”。

一言以蔽之，这六大原则不是说你背下来就能理解的，而是在你每一次代码设计或者框架设计的时候，都要拿出来反刍，将其再咀嚼一番。

## 一个类不能太累原则（单一职责原则）

一个软件就像一个大的公司，当一个软件发展的很壮大，就像一个公司发展装大一样，由于软件或者公司的业务非常多，我们需要将工作细分，让每个人做他们擅长的事情，大家明细分工，工作互不影响，但是互相的配合又非常到位（高内聚，低耦合）。

这样的话，一个人的工作出现了变动，或者说一个模块的代码出现了变动，不会影响另一个人的工作或者模块。

> **Single Responsibility Principle**：就一个类而言，应该只有一个引起它变化的原因。

这句话说起来是最简单的，但是生活中的生产实践起来并不是这么的简单，总会因为业务的变更而产生新的业务划分（类的划分），这需要架构人员强悍的能力和充实的经验。



## 电路板原则（开闭原则）

目前没有想到一个更好的比喻。因为电路板修改起来是非常困难的，但是拓展性极高，可以类比开闭原则。

像我们简单工厂和抽象工厂就是一个很实际的例子，简单工厂中如果需要添加一个新的产品，需要修改原来的代码，而抽象工厂就解决了这个问题。抽象工厂通过`Java`的反射机制来创建新的产品，而不需要修改一行代码。

> **Open-Colsed Principle**：一个软件实体应当对拓展开放，对修改关闭。

其实在我们实际的生产环境中，通过**抽象化**来实现开闭原则是关键所在。



## 父慈子孝原则（里氏替换原则）

这个比喻很不恰当，只是想让你印象深刻点（手动狗头）：儿子可以完美的代替父亲的工作，但是父亲并不可以代替儿子的工作，毕竟一代比一代强，儿子比父亲会的更多。

在软件中的意思就是：一个子类替换其基类，程序不会出现错误，反过来不会成立，所以一个软件最开始就是使用子类对象的话，就不能用其父类替换。毕竟子类可以拓展自己的成员和方法。

> **Liskov Substitution Principle**：所有引用基类（父类）的地方必须能够透明地使用其子类的对象。

顺便一说，Liskov 是美国第一位计算机女博士，而且获得过图灵奖。



## 父慈子孝原则接口版（依赖倒置原则）

我们的业务应该面向接口编程，方便我们的拓展和更改。

引用网上的一句话：

> 在大多数情况下，**开闭原则是目标，里氏代换原则是基础，依赖倒转原则是手段**这三个设计原则会同时出现，它们相辅相成，相互补充，目标一致，只是分析问题时所站角度不同而已。

> **Dependency Inversion Principle**：要针对接口而不是实现编程。



## 一个接口不能太累原则（接口隔离原则）

哈哈，一个类的工作不能太累，接口亦然。

如果一个接口的工作太过繁重，实现接口对接的类当然也是苦不堪言，让专业的接口干它们专业的事情！这样对大家都好。

> **Interface Segregation Principle**: 使用多个专门的接口，而不使用单一的总接口，即客户端不应该依赖那些它们不需要的接口。

也就是说，我们在设计中需要控制好接口的粒度，接口不能太小，以免太多的接口泛滥成灾，不利于维护；而且接口也不能太大，过大的接口非常臃肿，使用起来要抓狂。



## 距离产生美原则（迪米特法则）

人与人之间距离产生美，实体与实体之间也是如此，我们需要相对宽松的关系，共事起来才能流畅不受互相影响（低耦合）。

这里引用网上的一段话：

> 迪米特法则要求我们在设计系统时，**应该尽量减少对象之间的交互，如果两个对象之间不必彼此直接通信，那么这两个对象就不应当发生任何直接的相互作用，如果其中的一个对象需要调用另一个对象的某一个方法的话，可以通过第三者转发这个调用**。简言之，就是**通过引入一个合理的第三者来降低现有对象之间的耦合度**。
>
>    在将迪米特法则运用到系统设计中时，要注意下面的几点：**在类的划分上，应当尽量创建松耦合的类，类之间的耦合度越低，就越有利于复用，一个处在松耦合中的类一旦被修改，不会对关联的类造成太大波及**；**在类的结构设计上，每一个类都应当尽量降低其成员变量和成员函数的访问权限**；**在类的设计上，只要有可能，一个类型应当设计成不变类**；**在对其他类的引用上，一个对象对其他对象的引用应当降到最低**。

> **Law of Demeter**：一个软件实体应当尽量可能少的与其他实体发生相互的作用。

这原则个在Android中的MVP架构得到了实践。